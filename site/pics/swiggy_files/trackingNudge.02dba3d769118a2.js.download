webpackJsonp(["trackingNudge"],{"/CEQ":function(t,e){t.exports={container:"_1fKtX",slideUp:"_196wm",containerHide:"n32Go",slideDown:"_3_QG2",iconCtr:"_2NntA",icon:"_3vDYu",iconImg:"_3HGxr",content:"_3tCc7",contentTitle:"_1bDpd",contentDescription:"SOIk0",contentStatus:"_3dVrx",contentETA:"_27u1i",lineProgressBar:"_1W_YY"}},"4GCc":function(t,e,n){"use strict";n.d(e,"f",function(){return f}),n.d(e,"g",function(){return d}),n.d(e,"h",function(){return l}),n.d(e,"b",function(){return b}),n.d(e,"d",function(){return _}),n.d(e,"c",function(){return p}),n.d(e,"a",function(){return m}),n.d(e,"e",function(){return O});var r=n("K9EU"),o=(n.n(r),n("UUC3")),u=n("/u0G");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,u=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw u}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var f=function(t,e){return t===e},d=function(t,e){return t>e},l=function(t){return t.length<26?t:t.substring(0,23)+"..."},b=function(t){var e=a(t.split(" "),2),n=e[0],r=e[1],o=a(n.split("-"),3),u=o[0],i=o[1],c=o[2],s=a(r.split(":"),3),f=s[0],d=s[1],l=s[2],b=new Date(Number(u),Number(i),Number(c),Number(f),Number(d),Number(l)),_=b.getHours(),p=b.getMinutes(),m=" AM";0===_?_=12:_>=12&&(_>12&&(_%=12),m=" PM");var O=_.toString(),y=p.toString();return _<10&&(O="0"+_),p<10&&(y="0"+p),O+":"+y+m},_=function(){return o.e},p=function(t){return Object(r.isEmpty)(t)?o.e:t.indexOf(o.f)<0?-1===t.indexOf("//")&&-1===t.indexOf("cloudinary")?Object(r.getCloudinaryUrl)(t,{fill:!0,height:40,width:40,face:!0,keepExtension:!0}):t:t.replace(o.f,o.d)},m=function(t){return!Object(r.isEmpty)(t)},O=function(t){return[function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({eventType:u.a.PORTAL_DWEB_ORDER},t)]}},"TWL+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("VAmG");n.d(e,"default",function(){return r.a})},VAmG:function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n("GiK3"),o=n.n(r),u=n("CIox"),i=n("AdWY"),c=n("EJ0c"),a=n("HW6M"),s=n.n(a),f=n("/CEQ"),d=n.n(f),l=n("gBd+"),b=n("W8k2"),_=n("4GCc");function p(t){"@babel/helpers - typeof";return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;return j(t)}(this,n)}}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(f,o.a.Component);var e,n,r,a=y(f);function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),h(j(e=a.call(this,t)),"defaultState",{deImage:Object(_.d)()}),h(j(e),"_order",null),h(j(e),"_pollTimeout",null),h(j(e),"_orderKey",void 0),h(j(e),"_poll",function(){e._isMounted&&!Object(i.x)(e._order)&&Object(b.a)(e._order).then(function(t){e._isMounted&&(t.title===e._order.title&&t.message===e._order.message||(e._order=t,Object(i.x)(t.title)?e.reset():e.forceUpdate()),t.expected_time!==e._order.expected_time&&(e._order=t,e.forceUpdate()),null===e._order||Object(b.c)(e._order)||setTimeout(function(){e._isMounted&&e.reset()},l.a))}).catch(function(){}).then(function(){e._isMounted&&!Object(i.x)(e._order)&&e.startPolling()})}),h(j(e),"reset",function(){e._order=null,e.stopPolling(),e.props.fetchLaunchData()}),h(j(e),"goToTrackOrder",function(){u.browserHistory.push(Object(i.j)(l.f,e._orderKey))}),e.state=e.defaultState,e}return e=f,(n=[{key:"_init",value:function(){var t=this;Object(i.x)(this.props.trackData)||Object(b.b)(this.props.trackData).then(function(e){t._isMounted&&Object(b.c)(e)&&window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){t._isMounted&&(t._order=e,t._orderKey=e.order_key,t.props.show(),t.startPolling(),t._updateDEImage())})})}).catch(function(e){Object(c.b)(e),t.reset()})}},{key:"componentDidMount",value:function(){this._isMounted=!0,this._init()}},{key:"componentDidUpdate",value:function(t){JSON.stringify(t.trackData)!==JSON.stringify(this.props.trackData)&&this._init()}},{key:"startPolling",value:function(){Object(b.c)(this._order)&&(this.stopPolling(),this._pollTimeout=setTimeout(this._poll,l.d))}},{key:"stopPolling",value:function(){clearTimeout(this._pollTimeout)}},{key:"render",value:function(){var t;if(!this.props.visible||Object(i.x)(this._order)||Object(i.x)(this.props.trackData))return null;var e=this._order.show_eta,n="";e&&(n=Object(i.j)(l.e.ETA,this._order.expected_time));var r=s()((h(t={},d.a.container,!0),h(t,d.a.containerHide,this.props.willHide),t)),u=this.state.deImage;return o.a.createElement("div",{className:r,onClick:this.goToTrackOrder,onKeyPress:this.goToTrackOrder,tabIndex:"0",role:"button"},e?o.a.createElement("span",{className:d.a.contentETA},n):o.a.createElement("span",{className:d.a.contentStatus},l.e.STATUS),o.a.createElement("div",{className:d.a.content},o.a.createElement("div",{className:d.a.contentTitle},this._order.title),o.a.createElement("div",{className:d.a.contentDescription},Object(i.L)(this._order.message))),o.a.createElement("div",{className:d.a.iconCtr},o.a.createElement("div",{className:d.a.icon},o.a.createElement("img",{src:u,className:d.a.iconImg,alt:""}))))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.stopPolling()}},{key:"_setState",value:function(t,e){this._isMounted&&this.setState(t,e)}},{key:"_updateDEImage",value:function(){var t=this,e=this._order.image_url,n=Object(_.c)(e),r=new Image;r.onload=function(){t._setState({deImage:n})},r.src=n}}])&&m(e.prototype,n),r&&m(e,r),f}();v.defaultProps={trackData:{}}},W8k2:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return a});var r=n("AdWY"),o=n("eBl1"),u=n("sg1u"),i=(n("gBd+"),function(t){return Object(o.d)({order_id:t.order_id,type:"full",is_nudge:!0}).then(function(e){return function(t,e){return Object(r.x)(t)?Promise.reject():{title:u.r(t),message:u.o(t),order_id:u.q(t),annotation:u.m(t),status_code:t.status_code,order_key:e.key,image_url:u.j(t),show_eta:u.a(t),expected_time:u.n(t)}}(e,t)})}),c=function(t){if(Object(r.x)(t)||Object(r.x)(t.orders))return Promise.reject();var e=t.orders[t.orders.length-1];return 1!==e.trackable?Promise.reject():Object(o.b)({order_id:e.order_id,type:"full"}).then(function(t){return Object(r.x)(t)||Object(r.x)(t.orders)?Promise.reject():i(t.orders[0])})},a=function(t){return 0===t.status_code}},YWcv:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={SUCCESS_STATUS_MESSAGE:"success",INVALID_TRACKING_PARAMS:"Invalid cancellation request via tracking",UNABLE_TO_CANCEL:"Unable to cancel your order. Please try again."}},eBl1:function(t,e,n){"use strict";n.d(e,"b",function(){return _}),n.d(e,"d",function(){return p}),n.d(e,"c",function(){return m}),n.d(e,"e",function(){return O}),n.d(e,"a",function(){return y});var r=n("/g+L"),o=n("AdWY"),u=n("WGcP"),i=n("1oJu"),c=n("YWcv"),a=n("eRF6");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){d(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t){return"object"===l(t.statusMessage)?t.statusMessage.message||a.a:"string"==typeof t.statusMessage?t.statusMessage:a.a}var _=function(t){return Object(o.x)(t)||Object(o.x)(t.order_key)&&Object(o.x)(t.order_id)||Object(o.x)(t.type)?Promise.reject():r.a.get(Object(i.a)(u.b.ORDER_DETAILS),f({},t)).then(function(t){return t.statusCode===u.a?Promise.resolve(t.data):Promise.reject(b(t))})},p=function(t){return Object(o.x)(t)||Object(o.x)(t.order_key)&&Object(o.x)(t.order_id)||Object(o.x)(t.type)?Promise.reject():r.a.get(Object(i.a)(u.b.ORDER_TRACK_V2),f({},t)).then(function(t){return u.d.indexOf(t.statusCode)>=0?(t.data||(t.data={}),t.data.status_code=t.statusCode,Promise.resolve(t.data)):Promise.reject(b(t))}).catch(function(t){return Promise.reject(t)})},m=function(t){return Object(o.x)(t)||Object(o.x)(t.order_id)?Promise.reject():r.a.get(Object(i.a)(u.b.ORDER_TRACK_DE),f({},t)).then(function(t){return Number(t.statusCode)===u.a?Promise.resolve(t.data):Promise.reject(b(t))})},O=function(t){return r.a.post(Object(i.a)(u.b.ORDER_DELIVERED),{order_id:t.order_id}).then(function(t){return t.statusCode===u.a?Promise.resolve(t):Promise.reject(t)})},y=function(t){if(Object(o.x)(t)||Object(o.x)(t.orderId))return Promise.reject(c.a.INVALID_TRACKING_PARAMS);var e=Object(o.j)(Object(i.a)(u.b.CANCEL_ORDER),t.orderId);return r.a.get(e).then(function(t){var e=Object(o.q)(t,"data.conversation_id","").trim();return t.statusMessage!==c.a.SUCCESS_STATUS_MESSAGE?Promise.reject(t.statusMessage||c.a.UNABLE_TO_CANCEL):""===e?Promise.reject(c.a.UNABLE_TO_CANCEL):Promise.resolve(e)}).catch(function(t){return Promise.reject(t||c.a.UNABLE_TO_CANCEL)})}},eRF6:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return u});var r="Oops! Something went wrong!!",o="Swiggy Dineout is our all-new dining-out programme currently available to selected users in Hyderabad. If you're not a part of this programme, please stay tuned for a wider release.",u="Swiggy Dineout"},"gBd+":function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"g",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return i}),n.d(e,"a",function(){return c}),n.d(e,"e",function(){return a}),n.d(e,"f",function(){return s});var r="others_pin_tracking",o="work_pin_tracking",u="home_pin_tracking",i=3e4,c=1e3,a={STATUS:"Status",ETA_MIN:"ETA: {0} mins",ETA:"ETA: {0}"},s="/order-track/{0}"},sg1u:function(t,e,n){"use strict";n.d(e,"p",function(){return u}),n.d(e,"C",function(){return i}),n.d(e,"A",function(){return c}),n.d(e,"E",function(){return a}),n.d(e,"o",function(){return s}),n.d(e,"b",function(){return f}),n.d(e,"v",function(){return d}),n.d(e,"u",function(){return l}),n.d(e,"t",function(){return b}),n.d(e,"F",function(){return _}),n.d(e,"G",function(){return p}),n.d(e,"f",function(){return m}),n.d(e,"i",function(){return O}),n.d(e,"D",function(){return y}),n.d(e,"k",function(){return j}),n.d(e,"j",function(){return g}),n.d(e,"l",function(){return h}),n.d(e,"s",function(){return v}),n.d(e,"c",function(){return E}),n.d(e,"e",function(){return P}),n.d(e,"z",function(){return w}),n.d(e,"d",function(){return S}),n.d(e,"a",function(){return A}),n.d(e,"n",function(){return k}),n.d(e,"m",function(){return x}),n.d(e,"g",function(){return D}),n.d(e,"w",function(){return C}),n.d(e,"h",function(){return T}),n.d(e,"y",function(){return q}),n.d(e,"x",function(){return N}),n.d(e,"B",function(){return R}),n.d(e,"r",function(){return I}),n.d(e,"q",function(){return M});var r=n("AdWY"),o=n("UUC3"),u=function(t){var e=Object(r.q)(t,"order_status.order_state_id",0);return Number(e)},i=function(t){return u(t)===o.m},c=function(t){return u(t)===o.l},a=function(t){var e=u(t);return[o.l,o.m].indexOf(e)>-1},s=function(t){var e=Object(r.q)(t,"order_status.messages",[]).find(function(t){return"order_status"===t.key});return e&&e.show_message&&e.value||""},f=function(t){return Object(r.q)(t,"configuration.show_map",!1)},d=function(t){return f(t)?"":Object(r.q)(t,"outlet_details.outlet_messages","")},l=function(t){return f(t)?"":Object(r.q)(t,"outlet_details.outlet_messages","")},b=function(t){return Object(r.q)(t,"outlet_details.contact_number","")},_=function(t){return!f(t)&&!!Object(r.q)(t,"message_help.ask_confirmation",0)},p=function(t){if(f(t))return!1;var e=b(t);return!(!_(t)&&0===e.length)},m=function(t){var e=Object(r.q)(t,"order_status.icon");return Object(r.m)(e,{colorEffect:"colorEffect",height:44,whiteColor:"whiteColor",width:44})},O=function(t){var e=Object(r.q)(t,"order_status.messages",[]).find(function(t){return"delay_message"===t.key});return e&&e.show_message&&e.value||""},y=function(t){var e=Object(r.q)(t,"delivery_details");return!(!e||!e.delivery_exec_contact_number)},j=function(t){return Object(r.q)(t,"delivery_details.delivery_exec_contact_number","")},g=function(t){return Object(r.q)(t,"delivery_details.delivery_exec_image_url","")},h=function(t){return Object(r.q)(t,"delivery_details.annotation.name","")},v=function(t){return Object(r.q)(t,"order_details.order_state_sequence",[])},E=function(t){return Object(r.q)(t,"configuration.is_de_trackable",!1)},P=function(t){return Object(r.q)(t,"delivery_details.batched_destinations",[]).filter(function(t){return"DONE"!==Object(r.q)(t,"status","").toUpperCase()}).map(function(t){var e,n=Object(r.q)(t,"location",{});return e=n,{lat:Number(Object(r.q)(e,"lat",null)),lng:Number(Object(r.q)(e,"lng",null))}})},w=function(t){return P(t).length>0},S=function(t){return Object(r.q)(t,"delivery_details.batched_order_message",o.o.DELIVERING_ORDER_NEARBY)},A=function(t){return Object(r.q)(t,"order_status.eta.show_eta",!1)},k=function(t){return Object(r.q)(t,"order_status.eta.eta_text","")},x=function(t){switch(Object(r.q)(t,"customer.annotation.name","").toUpperCase()){case"HOME":return"Home";case"WORK":return"Work";default:return!1}},D=function(t){var e=Object(r.q)(t,"customer.annotation.icon",null),n=Object(r.q)(t,"customer.annotation.name","").toUpperCase();if(e)return Object(r.m)(e);switch(n){case"HOME":return o.h;case"WORK":return o.k;default:return o.c}},C=function(t){var e=Object(r.q)(t,"outlet_details.annotation.icon",null);return e?Object(r.m)(e):o.c},T=function(){return o.b},q=function(t){return f(t)?"":Object(r.q)(t,"outlet_details.annotation.name","")},N=function(t){return f(t)?"":Object(r.q)(t,"outlet_details.annotation.name","")},R=function(t){var e=Object(r.q)(t,"delivery_details.location.lat"),n=Object(r.q)(t,"delivery_details.location.lng");return void 0===e||void 0===n},I=function(t){return Object(r.q)(t,"order_status.order_state","")},M=function(t){return Object(r.q)(t,"order_details.order_id","")}}});
//# sourceMappingURL=trackingNudge.02dba3d769118a2.js.map